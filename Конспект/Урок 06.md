# –£—Ä–æ–∫ 06 ‚Äî –í–≤–µ–¥–µ–Ω–∏–µ –≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ SQLAlchemy

##  –¶–µ–ª–∏ —É—Ä–æ–∫–∞:
- –û—Å–≤–æ–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.  
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL –∏ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω –ø—Ä–æ–µ–∫—Ç—É.  
- –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é **SQLAlchemy**.  
- –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ SQL-–∫–æ–º–∞–Ω–¥—ã –Ω–∞ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö.  
- –ó–∞–∫—Ä–µ–ø–∏—Ç—å –Ω–∞–≤—ã–∫ —Ä–∞–±–æ—Ç—ã —Å Git –∏ –ø—É—à–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± **—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**.  
–í –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ (PersonalShop) –±–∞–∑–∞ –Ω—É–∂–Ω–∞, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å:
- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ—Ç–∞,  
- –∫–æ—Ä–∑–∏–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤,  
- –∑–∞–∫–∞–∑—ã –∏ –∏—Å—Ç–æ—Ä–∏—é –¥–µ–π—Å—Ç–≤–∏–π.  

–ú—ã –≤—ã–±—Ä–∞–ª–∏ **PostgreSQL**, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ:
- –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è, –º–æ—â–Ω–∞—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞;
- –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Python –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º SQLAlchemy.

---

## 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
–ù–∞ —É—Ä–æ–∫–µ PostgreSQL **—É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏**, –Ω–æ –ø–æ–∫–∞ **–Ω–µ –ø–æ–¥–∫–ª—é—á–∞–ª–∏** –∫ –ø—Ä–æ–µ–∫—Ç—É.  
–î–∞–ª—å—à–µ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë —á–µ—Ä–µ–∑ SQLAlchemy, —á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å SQL –≤—Ä—É—á–Ω—É—é.

---

## 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ SQLAlchemy

–§–∞–π–ª: `database/base.py`
```python
import os
from dotenv import load_dotenv
from sqlalchemy import create_engine
from sqlalchemy.orm import DeclarativeBase

load_dotenv()

class Base(DeclarativeBase):
    pass
```

 **–†–∞–∑–±–æ—Ä –∫–æ–¥–∞:**
- `load_dotenv()` ‚Äî –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env` (–Ω–∞–ø—Ä–∏–º–µ—Ä, URL –±–∞–∑—ã).  
- `DeclarativeBase` ‚Äî –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π.  
  –û—Ç –Ω–µ–≥–æ –±—É–¥—É—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü—ã (–º–æ–¥–µ–ª–∏).  
- –í –±—É–¥—É—â–µ–º –¥–æ–±–∞–≤–∏–º `create_engine()` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL.

---

## 4. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –º–æ–¥–µ–ª–∏ ‚Äî `Users`

–§–∞–π–ª: `database/models/users.py`
```python
from sqlalchemy import BigInteger, String
from sqlalchemy.orm import Mapped, mapped_column, relationship
from database.base import Base

class Users(Base):
    __tablename__ = "users"
    id: Mapped[int] = mapped_column(primary_key=True)
    name: Mapped[str] = mapped_column(String(70))
    telegram: Mapped[int] = mapped_column(BigInteger, unique=True)
    phone: Mapped[str] = mapped_column(String, nullable=True)



    def __str__(self):
        return self.name
```

 **–ß—Ç–æ –≤–∞–∂–Ω–æ:**
- `__tablename__` ‚Äî –∏–º—è —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.  
- `mapped_column()` ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–æ–ª–±–µ—Ü —Ç–∞–±–ª–∏—Ü—ã.  
- `__str__` ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –ø—Ä–∏ –ø–µ—á–∞—Ç–∏.

---

## 5. –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ SQL –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ

–ù–∞ —É—Ä–æ–∫–µ –º—ã –ø–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å –±–∞–∑–æ–≤—ã–º–∏ SQL-–∫–æ–º–∞–Ω–¥–∞–º–∏:
```sql
SELECT Passenger.name from Passenger;
select Company.name from Company;
select Trip.* from Trip
where Trip.town_from = "Moscow";
```

üí° –≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ–º–æ–≥–ª–∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∏ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü.

---

## 6. –†–∞–±–æ—Ç–∞ —Å Git
–ú—ã –ø–æ–≤—Ç–æ—Ä–∏–ª–∏ –∫–æ–º–∞–Ω–¥—ã Git:
```bash
git add .
git commit -m "–î–æ–±–∞–≤–∏–ª –º–æ–¥–µ–ª—å Users –∏ –±–∞–∑—É"
git push
```
–ü–æ—Å–ª–µ —á–µ–≥–æ –ø—Ä–æ–µ–∫—Ç —Å –Ω–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –±—ã–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—à–µ–Ω –Ω–∞ GitHub.

---

##  –ß—Ç–æ –≤–∞–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å:
- PostgreSQL ‚Äî –Ω–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö.  
- SQLAlchemy ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑—ã–≤–∞–µ—Ç Python —Å SQL.  
- –ú–æ–¥–µ–ª—å `Users` ‚Äî –ø–µ—Ä–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ.  
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ GitHub, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å.
